"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[9765],{55576:(e,i,n)=>{n.r(i),n.d(i,{InjectThirdPartyScripts:()=>k,useThirdPartyScripts:()=>_});var s=n(96486),o=n.n(s),r=n(67294),t=n(13991),a=n(480),d=n(16489),c=n(29450),u=n(65454);const p="a2a8e2144b2bbbb4074a",l="901895b8-45c7-40c8-ba91-626cfc6739b3";function g(){var e,i,n;if(!window._cio)for(window._cio=[],e=function(e){return function(){window._cio.push([e].concat(Array.prototype.slice.call(arguments,0)))}},i=["load","identify","sidentify","track","page","on","off"],n=0;n<i.length;n++)window._cio[i[n]]=e(i[n])}var w=n(7250),m=n(66673);var f=n(95477),S=n(15010),I=n(58455),b=n(79315),y=n(61893),h=n(10161),v=n(3418),E=n(69454);function _(){const e=(0,a.O7)(),i=(0,a.Fy)(),{currentUser:n}=e,{isEnabled:s,spaceId:_,userEmail:k,userDaysSinceSignup:D,userDomainType:A,isSpaceAdmin:C}=(0,d.VK)((()=>{const e=I.default.state.isSprigEnabled&&y.Z.state.permission.performance&&h.default.checkGate("sprig")&&i.isDesktop,{currentUserSettingsStore:n,currentSpaceStore:s,currentUserStore:o}=b.default.state,r=null==s?void 0:s.id,t=null==o?void 0:o.getEmail(),a=n?(0,S.e2)(n):null,d=Boolean(null==s?void 0:s.canAdmin());return{isEnabled:e,spaceId:r,userEmail:t,userDaysSinceSignup:a,userDomainType:(0,S.JF)(),isSpaceAdmin:d}}),[i]);!function(e){let{isEnabled:i,isLoggedIn:n,userId:s}=e;(0,r.useEffect)((()=>{i&&(0,c.hasPermissionForThirdPartyServiceBrowser)("customer_io")&&("cio-tracker"in window||(g(),(0,u.Z)("https://assets.customer.io/assets/track.js",{id:"cio-tracker",attributes:{"data-site-id":p,"data-use-array-params":"true","data-in-app-org-id":l,"data-use-in-app":"true"}})))}),[i]),(0,r.useEffect)((()=>{if(!n||void 0===s)return;g(),window._cio.identify({id:s});const e=function(e){console.log("Type: ",e.type),console.log("Message Id: ",e.detail.messageId),console.log("Delivery Id: ",e.detail.messageId)};window._cio.on("in-app:message-opened",e),window._cio.on("in-app:message-dismissed",e),window._cio.off("in-app:message-opened",e),window._cio.on("in-app:message-error",(function(e){console.log("you hit a c.io message error"),console.log(e)}))}),[n,s])}({isEnabled:(0,d.VK)((()=>h.default.checkGate("customerio")),[]),isLoggedIn:n.isLoggedIn(),userId:n.id}),function(e){let{isEnabled:i,isLoggedIn:n,userId:s,userEmail:o,spaceId:t,sprigConfig:a,userDaysSinceSignup:d,userDomainType:c,isSpaceAdmin:p}=e;(0,r.useEffect)((()=>{if(!i||!n||void 0===s||void 0===o||void 0===t||void 0===a||void 0===c)return;if(window.Sprig)return;const e=function(){e._queue.push(arguments)};e._queue=[],e.appId=a.environmentId,window.Sprig=e,window.UserLeap=e,window.Sprig("setUserId",s),window.Sprig("setEmail",o),window.Sprig("setAttribute","SPACE_ID",t),d>=3&&d<=14&&"professional"===c&&(p?window.Sprig("track","trigger-phase-1"):window.Sprig("track","trigger-phase-1-1")),(0,u.Z)("https://cdn.sprig.com/shim.js")}),[i,n,s,a,o,t,p,c,d]);const l=(0,m.D9)(n);(0,r.useEffect)((()=>{l&&!n&&window.Sprig&&window.Sprig("logoutUser")}),[l,n])}({isEnabled:s,isLoggedIn:n.isLoggedIn(),userId:n.id,spaceId:_,userEmail:k,sprigConfig:f.Z.sprig,userDaysSinceSignup:D??0,isSpaceAdmin:C,userDomainType:A}),(0,w.oG)({getLocale:(0,r.useCallback)((()=>t.SP),[]),analyticsSettings:(0,d.VK)((()=>o().pick(I.default.state,["isIntercomEnabled","intercomAppId","intercomUserHash","noIntercomUserId","user_id","user_email"])),[]),onVisibilityChange:(0,r.useCallback)((i=>{E.Z.updateShouldResizeWebview(e,i,"v1"),i?v.Z.addNamedPopup("intercom"):v.Z.removeNamedPopup("intercom")}),[e])})}function k(){return _(),null}}}]);