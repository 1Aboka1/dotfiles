"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5645],{78737:(e,t,o)=>{o.r(t),o.d(t,{AutomationModal:()=>h});var n=o(77094),i=o.n(n),a=o(67294),r=o(480),l=o(16489),c=o(24405),s=o(63362),u=o(5366),d=o(82990),m=o(33116),p=o(63474),f=o(79315),g=o(58454),b=o(42922),v=o(1743),y=o(22346),x=o(89728),S=o(31278),w=o(65187);const k=(0,u.defineMessages)({confirmationDialogAriaLabel:{defaultMessage:"Confirmation",id:"automations.ConfirmationDialog.ariaLabel",description:"The aria label used to label the confirmation dialog"}});function h(){window.__c="AutomationModal";const e=(0,l.VK)((()=>g.Z.state),[]),t=(0,r.Fy)(),o=(0,c.yK)((e=>({innerStyle:{padding:"36px",width:t.isMobile?"calc(100% - 20px)":340}})),[t]),n=(0,p.D)(),u=(0,l.VK)((()=>{var e;return null===(e=f.default.state.currentSpaceViewStore)||void 0===e?void 0:e.getSpaceId()}),[]),d=(0,a.useCallback)((e=>{var t;g.Z.setState({open:!1,result:e});const o=g.Z.state;(0,s.W5)(n,{automation_id:o.open?null===(t=o.automationStore)||void 0===t?void 0:t.id:void 0,option:e})}),[n]),m=(0,a.useCallback)((()=>d("cancel")),[d]),b=function(){const e=(0,l.VK)((()=>g.Z.state),[]),[t,o]=(0,a.useReducer)(((e,t)=>e+1),1),n=(0,a.useRef)(void 0);return(0,a.useEffect)((()=>{e.open&&e.format!==n.current&&(o(void 0),n.current=e.format)}),[e,n]),t}();return i()(y.Z,{open:e.open,keepFocus:!0,innerStyle:o.innerStyle,disableAnimation:!0,onDismiss:m,render:()=>e.open&&u&&i()(C,{id:`${b}`,modalState:e,currentSpaceId:u,onDismiss:d},`${b}`)})}function C(e){window.__c="OpenAutomationModal";const{id:t,modalState:o,currentSpaceId:n,onDismiss:r}=e,{icon:l}=o.format,s=(0,u.useIntl)(),p=(0,a.useRef)(null);(0,a.useEffect)((()=>{null!==p.current&&p.current.focus()}),[]);const f=(0,c.yK)((e=>({wrap:{display:"flex",flexDirection:"column"},buttonWrap:{display:"flex",flexDirection:"column",gap:10,marginTop:10},textWrap:{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"center",fontWeight:d.Z.fontWeight.medium,marginTop:10,marginBottom:10,display:"flex",flexDirection:"column",alignItems:"center"},icon:{marginBottom:10},cancelButton:{justifyContent:"center"}})),[]),{store:g}=(0,m.Cl)({parentSpaceId:n,initialValue:o.format.text,onChange:()=>{}}),y=[a.createElement(b.Z,{key:"continue",isLarge:!0,onClick:()=>r("continue"),ref:p},o.format.continueButtonText),i()(x.Z,{isLarge:!0,onClick:()=>r("cancel"),isLightGray:!0,style:f.cancelButton},"cancel",o.format.cancelButtonText)],h=`automation-modal-dialog-${t}`;return i()(v.Z,{capture:!0,allowEsc:!0},void 0,i()("div",{"aria-modal":"true","aria-label":s.formatMessage(k.confirmationDialogAriaLabel),"aria-describedby":h,role:"dialog",style:f.wrap},void 0,i()("div",{style:f.textWrap},void 0,l&&o.automationStore&&i()("div",{style:f.icon},void 0,i()(S.Z,{size:50,icon:{icon:l,pointer:o.automationStore.pointer},disabled:!0,isEmptyPage:!1,bucket:"public",onChange:()=>{}})),i()("div",{id:h},void 0,i()(w.Z,{disabled:!0,store:g}))),i()("div",{style:f.buttonWrap},void 0,y)))}}}]);